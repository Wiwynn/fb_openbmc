From f3e2e1a9f0031ed246e45b54bb2d3502484a6673 Mon Sep 17 00:00:00 2001
From: RickyWu-wiwynn <ricky_cx_wu@wiwynn.com>
Date: Wed, 7 Feb 2024 11:30:52 +0800
Subject: [PATCH] arm64: dts: yosemite4-n: add regulator for ADC

---
 .../dts/nuvoton/nuvoton-npcm845-yosemite4.dts     | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
index 9a5302a0647f..b3aab4e77bd5 100644
--- a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
+++ b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
@@ -78,6 +78,20 @@ iio-hwmon {
 			<&adc 4>, <&adc 5>, <&adc 6>, <&adc 7>;
 	};
 
+	regulators {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		reg_vref1_8: regulator@0 {
+			compatible = "regulator-fixed";
+			reg = <0>;
+			regulator-name = "vref_1_8v";
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <1800000>;
+		};
+	};
+
 	firmware {
 		optee {
 			compatible = "linaro,optee-tz";
@@ -1556,6 +1570,7 @@ &jtm1 {
 &adc {
 	#io-channel-cells = <1>;
 	status = "okay";
+	vref-supply = <&reg_vref1_8>;
 };
 
 &sgpio1 {
-- 
2.25.1

